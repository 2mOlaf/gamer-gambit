apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

bases:
- ../../base

namePrefix: "test-"
nameSuffix: ""

images:
- name: ghcr.io/2molaf/jarvfjallet-discord-bot
  newTag: test

commonLabels:
  environment: test

resources:
- test-namespace.yaml

patches:
- target:
    kind: Deployment
    name: jarvfjallet
  patch: |-
    - op: replace
      path: /metadata/namespace
      value: gamer-gambit-test
- target:
    kind: Service
    name: jarvfjallet-service
  patch: |-
    - op: replace
      path: /metadata/namespace
      value: gamer-gambit-test
- target:
    kind: PersistentVolumeClaim
    name: jarvfjallet-data
  patch: |-
    - op: replace
      path: /metadata/namespace
      value: gamer-gambit-test
